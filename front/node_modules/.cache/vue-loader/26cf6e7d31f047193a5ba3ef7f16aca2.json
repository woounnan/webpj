{"remainingRequest":"/work/webpj/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/work/webpj/front/src/views/Chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"/work/webpj/front/src/views/Chat.vue","mtime":1585582185032},{"path":"/work/webpj/front/node_modules/cache-loader/dist/cjs.js","mtime":1585583105036},{"path":"/work/webpj/front/node_modules/babel-loader/lib/index.js","mtime":1585458647532},{"path":"/work/webpj/front/node_modules/cache-loader/dist/cjs.js","mtime":1585583105036},{"path":"/work/webpj/front/node_modules/vue-loader/lib/index.js","mtime":1585458650273}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport moment from 'moment'\nimport Chat from '../../node_modules/basic-vue-chat/src/components/basic-vue-chat/BasicVueChat.vue'\nimport Bar from './Bar.vue'\nimport List from './List.vue'\nimport Preview from './Preview.vue'\nimport io from 'socket.io-client'\nexport default{\n\tname: 'App',\n\tcomponents: {\n\t\tChat,\n\t\tList,\n\t\tBar,\n\t\tPreview\n\t},\n\tprops:{\n\t},\n\tdata: function (){\n\t\treturn {\n\t\t\tmessage: {},\n\t\t\ttest : '',\n\t\t\tlayout: [\n\t          ['toolbar', 1, 1, 'list'],\n\t          [0, 0, 0, 0],\n        \t],\n        \tidx1: 1,\n        \tidx2: 0,\n        \tidx3: 3,\n\t\t}\n\t},\n\tcreated(){\n   \t\tthis.$store.commit('initSocks')\n   \t\tthis.$store.commit('initWorks')\n   \t\tthis.sendWork()\n\n\t\tvar eve = 'sock_initWorks'\n\n\t\tif(this.$store.getters.getMountedCheck.indexOf(eve) == -1){\n\t\t\tthis.$store.commit('pushMountedCheck', eve)\n\t   \t\tthis.$store.state.socks.sock.on(eve, ()=>{\n\t   \t\t\tconsole.log('call sock_initWorks:::',this.$store)\n\t\t   \t\tthis.$store.commit('initWorks')\n\t   \t\t})\n   \t\t}\n\t},\n   \tmounted(){\n\t\tthis.$store.commit(\"setToday\")\n\t\tsetInterval(()=>{this.$store.commit(\"setToday\")},  3600 * 1000 )\n   \t},\n\tmethods: {\n\t\t//첫 등록 이외의 모든 작업 socket 처리\n\t\tsendWork(){\n\t\t\tvar eve = 'sendWork'\n\t\t\tif(this.$store.getters.getMountedCheck.indexOf(eve) == -1){\n\t\t\t\tthis.$store.commit('pushMountedCheck', eve)\n\t\t\t\tthis.$store.state.bus.$on(eve,  (data)=>{\n\t\t\t\t\tconsole.log('here is in sendWork::::', data)\n\t\t\t\t\tdata.convs.works.flag_date = data.convs.date\n\t\t\t\t\tdata.convs.date = moment().format('HH:mm:ss')\n\t\t\t\t\tdata.convs.id = this.$store.getters.getUser.id\n\t\t\t\t\tdata.convs.position = this.$store.getters.getUser.position\n\t\t\t\t\tdata.convs.works.flag_sendDate = this.$store.getters.getToday\n\t\t\t\t\tdata.to.forEach(x=>{\n\n\t\t\t\t\t\tconsole.log('::::', x)\n\t\t\t\t\t\tvar to = x.position\n\t\t\t\t\t\tconst header = {\n\t\t\t\t\t\tto : to,\n\t\t\t\t\t\tfrom : this.$store.getters.getUser.position\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.$store.state.socks.sock.emit('msg', {msg: data.convs, header: header})\n\t\t\t\t\t\tconsole.log('이사람에게 보냈어::::', to)\n\t\t\t\t\t})\n\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\tthis.$store.commit('initWorks')\n\t\t\t\t\t\tthis.$store.state.socks.sock.emit('sock_initWorks', {id: this.$store.getters.getUser.id})\n\t\t\t\t\t}, 50)\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tshowState(){\n\t\t\tconsole.log(this.$store.state.user.works.fromWork)\n\t\t}\n\t}\n};\n",{"version":3,"sources":["Chat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Chat.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<v-container>\n\t<v-row \n\t\trow wrap\n\t>\n\t\t<v-col\n\t\t\tcols=\"9\">\n\t\t\t<v-container>\n\t\t<v-row row wrap>\n\t\t\t<v-col cols=\"6\">\n\t\t\t<Preview :goings=\"$store.state.user.works.fromWork\" :idx_sep=\"idx1\"/>\n\t\t\t\t\n\t\t\t</v-col>\n\t\t\t<v-col cols=\"6\">\n\t\t\t\t<Preview :goings=\"$store.state.user.works.toWork\" :idx_sep=\"idx2\"/>\n\t\t\t</v-col>\n\t\t\t<v-col cols=\"12\">\n\t\t\t\t<Preview :goings=\"$store.state.user.works.fromNotice\" :idx_sep=\"idx3\"/>\n\t\t\t</v-col>\n\t\t</v-row>\n\n\t</v-container>\n\t\t</v-col>\t\n\t\t<v-col \n\t\t\tcols=\"3\">\n\t\t\t<v-row row wrap>\n\t\t\t\t<List />\n\t\t\t</v-row>\n\t\t</v-col>\n\t</v-row>\n\t<v-row>\n\t\t<v-col align=\"end\" cols=\"12\">\n  \t\t\t<Bar />\n  \t\t</v-col>\n\t</v-row>\n</v-container>\n</template>\n<script>\nimport moment from 'moment'\nimport Chat from '../../node_modules/basic-vue-chat/src/components/basic-vue-chat/BasicVueChat.vue'\nimport Bar from './Bar.vue'\nimport List from './List.vue'\nimport Preview from './Preview.vue'\nimport io from 'socket.io-client'\nexport default{\n\tname: 'App',\n\tcomponents: {\n\t\tChat,\n\t\tList,\n\t\tBar,\n\t\tPreview\n\t},\n\tprops:{\n\t},\n\tdata: function (){\n\t\treturn {\n\t\t\tmessage: {},\n\t\t\ttest : '',\n\t\t\tlayout: [\n\t          ['toolbar', 1, 1, 'list'],\n\t          [0, 0, 0, 0],\n        \t],\n        \tidx1: 1,\n        \tidx2: 0,\n        \tidx3: 3,\n\t\t}\n\t},\n\tcreated(){\n   \t\tthis.$store.commit('initSocks')\n   \t\tthis.$store.commit('initWorks')\n   \t\tthis.sendWork()\n\n\t\tvar eve = 'sock_initWorks'\n\n\t\tif(this.$store.getters.getMountedCheck.indexOf(eve) == -1){\n\t\t\tthis.$store.commit('pushMountedCheck', eve)\n\t   \t\tthis.$store.state.socks.sock.on(eve, ()=>{\n\t   \t\t\tconsole.log('call sock_initWorks:::',this.$store)\n\t\t   \t\tthis.$store.commit('initWorks')\n\t   \t\t})\n   \t\t}\n\t},\n   \tmounted(){\n\t\tthis.$store.commit(\"setToday\")\n\t\tsetInterval(()=>{this.$store.commit(\"setToday\")},  3600 * 1000 )\n   \t},\n\tmethods: {\n\t\t//첫 등록 이외의 모든 작업 socket 처리\n\t\tsendWork(){\n\t\t\tvar eve = 'sendWork'\n\t\t\tif(this.$store.getters.getMountedCheck.indexOf(eve) == -1){\n\t\t\t\tthis.$store.commit('pushMountedCheck', eve)\n\t\t\t\tthis.$store.state.bus.$on(eve,  (data)=>{\n\t\t\t\t\tconsole.log('here is in sendWork::::', data)\n\t\t\t\t\tdata.convs.works.flag_date = data.convs.date\n\t\t\t\t\tdata.convs.date = moment().format('HH:mm:ss')\n\t\t\t\t\tdata.convs.id = this.$store.getters.getUser.id\n\t\t\t\t\tdata.convs.position = this.$store.getters.getUser.position\n\t\t\t\t\tdata.convs.works.flag_sendDate = this.$store.getters.getToday\n\t\t\t\t\tdata.to.forEach(x=>{\n\n\t\t\t\t\t\tconsole.log('::::', x)\n\t\t\t\t\t\tvar to = x.position\n\t\t\t\t\t\tconst header = {\n\t\t\t\t\t\tto : to,\n\t\t\t\t\t\tfrom : this.$store.getters.getUser.position\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.$store.state.socks.sock.emit('msg', {msg: data.convs, header: header})\n\t\t\t\t\t\tconsole.log('이사람에게 보냈어::::', to)\n\t\t\t\t\t})\n\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\tthis.$store.commit('initWorks')\n\t\t\t\t\t\tthis.$store.state.socks.sock.emit('sock_initWorks', {id: this.$store.getters.getUser.id})\n\t\t\t\t\t}, 50)\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tshowState(){\n\t\t\tconsole.log(this.$store.state.user.works.fromWork)\n\t\t}\n\t}\n};\n</script>\n"]}]}